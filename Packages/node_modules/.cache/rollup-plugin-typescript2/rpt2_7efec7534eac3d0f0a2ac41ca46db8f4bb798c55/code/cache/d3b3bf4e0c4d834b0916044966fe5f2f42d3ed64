{"code":"/**\r\n * 组件信息管理\r\n */\r\nclass ComponentInfoMgr {\r\n    /**\r\n     * 获取指定名字的组件信息JSON字符串，名字为空时返回所有组件信息\r\n     * @param componentName 组件名字\r\n     * @returns json格式的组件信息字符串\r\n     */\r\n    getJsonString(componentName) {\r\n        if (!componentName) {\r\n            return JSON.stringify(this.componentInfos);\r\n        }\r\n        const componentInfo = this.componentInfos[componentName];\r\n        if (!componentInfo) {\r\n            return null;\r\n        }\r\n        return JSON.stringify(componentInfo);\r\n    }\r\n    /**\r\n     * 获取指定名字的组件信息，名字不能为空\r\n     * @param componentName 组件名\r\n     * @returns 组件信息\r\n     */\r\n    getComponentInfo(componentName) {\r\n        return this.componentInfos[componentName];\r\n    }\r\n    /**\r\n     * 注册组件\r\n     * @param name 组件名字\r\n     * @param cls 组件类\r\n     * @param path 组件在编辑器的inspector面板显示的索引路径\r\n     */\r\n    registerComponent(name, cls, path) {\r\n        let compInfo = this.componentInfos[name];\r\n        if (!compInfo) {\r\n            compInfo = {\r\n                name,\r\n                path,\r\n                properties: {}\r\n            };\r\n            this.componentInfos[name] = compInfo;\r\n        }\r\n        if (cls) {\r\n            this.componentClass[name] = cls;\r\n        }\r\n        compInfo.path = compInfo.path || path;\r\n    }\r\n    /**\r\n     * 向组件中添加组件的属性信息\r\n     * @param component 组件名字\r\n     * @param propInfo 组件信息\r\n     */\r\n    addPropertyToComponent(component, propInfo) {\r\n        this.registerComponent(component);\r\n        const comp = this.componentInfos[component];\r\n        comp.properties[propInfo.name] = propInfo;\r\n    }\r\n    /**\r\n     * 查找组件构造函数\r\n     * @param component 组件名\r\n     * @returns 组件构造函数\r\n     */\r\n    findComponentConstructor(component) {\r\n        return this.componentClass[component];\r\n    }\r\n    componentClass = {};\r\n    componentInfos = {};\r\n}\r\nexport const compInfoMgr = new ComponentInfoMgr();\r\n//# sourceMappingURL=component-info-mgr.js.map","references":[],"map":"{\"version\":3,\"file\":\"component-info-mgr.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/component/component-info-mgr.ts\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;AACH,MAAM,gBAAgB;IAClB;;;;OAIG;IACI,aAAa,CAAC,aAAsB;QACvC,IAAI,CAAC,aAAa,EAAE;YAChB,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC9C;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,CAAC,aAAa,EAAE;YAChB,OAAO,IAAI,CAAC;SACf;QACD,OAAO,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IACzC,CAAC;IAED;;;;OAIG;IACI,gBAAgB,CAAC,aAAqB;QACzC,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;IAC9C,CAAC;IAED;;;;;OAKG;IACI,iBAAiB,CAAwB,IAAY,EAAE,GAAO,EAAE,IAAa;QAChF,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,EAAE;YACX,QAAQ,GAAG;gBACP,IAAI;gBACJ,IAAI;gBACJ,UAAU,EAAE,EAAE;aACjB,CAAA;YACD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;SACxC;QACD,IAAI,GAAG,EAAE;YACL,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;SACnC;QACD,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC;IAC1C,CAAC;IAED;;;;OAIG;IACI,sBAAsB,CAAC,SAAiB,EAAE,QAAsB;QACnE,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAClC,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QAC5C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;IAC9C,CAAC;IAED;;;;OAIG;IACI,wBAAwB,CAAC,SAAiB;QAC7C,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IAC1C,CAAC;IAEO,cAAc,GAAmC,EAAE,CAAC;IACpD,cAAc,GAAmB,EAAE,CAAC;CAC/C;AA+BD,MAAM,CAAC,MAAM,WAAW,GAAG,IAAI,gBAAgB,EAAE,CAAC\"}"}
