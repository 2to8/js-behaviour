{"code":"import { compInfoMgr } from \"./component-info-mgr\";\r\nclass ComponentInstMgr {\r\n    /**\r\n     * 给定一个组件类名，创建对应的实例\r\n     * @param className 组件类名\r\n     * @returns 返回实例ID\r\n     */\r\n    newComponent(className) {\r\n        const componentCls = compInfoMgr.findComponentConstructor(className);\r\n        if (!componentCls) {\r\n            console.error(`cannot find component constructor ${className}.`);\r\n            return InvalidComponentID;\r\n        }\r\n        const componentId = ++this.componentIdSeed;\r\n        this.components[componentId] = new componentCls();\r\n        return componentId;\r\n    }\r\n    /**\r\n     * 删除一个组件实例\r\n     * @param componentId 组件实例ID\r\n     */\r\n    delComponent(componentId) {\r\n        delete this.components[componentId];\r\n    }\r\n    /**\r\n     * 获取组件实例上的一个方法名\r\n     * @param componentId 组件实例ID\r\n     * @param methodName 方法名\r\n     * @returns 绑定组件实例后的方法\r\n     */\r\n    getComponentMethod(componentId, methodName) {\r\n        const componentInst = this.components[componentId];\r\n        if (!componentInst) {\r\n            console.error(`cannot find component with id ${componentId}.`);\r\n            return undefined;\r\n        }\r\n        const method = componentInst[methodName];\r\n        if (!method) {\r\n            return undefined;\r\n        }\r\n        return method.bind(componentInst);\r\n    }\r\n    componentIdSeed = 0;\r\n    components = {};\r\n}\r\nexport const InvalidComponentID = -1;\r\nexport const compInstMgr = new ComponentInstMgr;\r\n//# sourceMappingURL=component-inst-mgr.js.map","references":["/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-base.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-info-mgr.ts"],"map":"{\"version\":3,\"file\":\"component-inst-mgr.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/component/component-inst-mgr.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,sBAAsB,CAAC;AAEnD,MAAM,gBAAgB;IAClB;;;;OAIG;IACI,YAAY,CAAC,SAAiB;QACjC,MAAM,YAAY,GAAG,WAAW,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,EAAE;YACf,OAAO,CAAC,KAAK,CAAC,qCAAqC,SAAS,GAAG,CAAC,CAAC;YACjE,OAAO,kBAAkB,CAAC;SAC7B;QACD,MAAM,WAAW,GAAG,EAAE,IAAI,CAAC,eAAe,CAAC;QAC3C,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,GAAG,IAAI,YAAY,EAAE,CAAC;QAClD,OAAO,WAAW,CAAC;IACvB,CAAC;IAED;;;OAGG;IACI,YAAY,CAAC,WAAmB;QACnC,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;IAED;;;;;OAKG;IACI,kBAAkB,CAAC,WAAmB,EAAE,UAAkB;QAC7D,MAAM,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,EAAE;YAChB,OAAO,CAAC,KAAK,CAAC,iCAAiC,WAAW,GAAG,CAAC,CAAC;YAC/D,OAAO,SAAS,CAAC;SACpB;QACD,MAAM,MAAM,GAAI,aAAqB,CAAC,UAAU,CAAa,CAAC;QAC9D,IAAI,CAAC,MAAM,EAAE;YACT,OAAO,SAAS,CAAC;SACpB;QACD,OAAO,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACtC,CAAC;IAEO,eAAe,GAAG,CAAC,CAAC;IACpB,UAAU,GAAiC,EAAE,CAAC;CACzD;AAED,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAAC,CAAC,CAAC;AAErC,MAAM,CAAC,MAAM,WAAW,GAAG,IAAI,gBAAgB,CAAC\"}"}
