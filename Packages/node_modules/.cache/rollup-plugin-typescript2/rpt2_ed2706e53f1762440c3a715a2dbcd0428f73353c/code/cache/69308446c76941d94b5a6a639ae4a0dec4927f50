{"code":"import { __decorate } from \"tslib\";\r\nimport TestBind from 'sandbox/TestBind';\r\nimport { Sandbox, System, UnityEngine } from 'csharp';\r\nimport { Component } from 'component/component-base';\r\nimport { component, property } from 'component/component-decoration';\r\nvar Debug = UnityEngine.Debug;\r\nvar TestCs2Ts = Sandbox.TestCs2Ts;\r\nexport * from './component/component-info-mgr';\r\nexport * from './component/component-inst-mgr';\r\nglobal.hello = (s) => {\r\n    Debug.Log(`hello, ${s}`);\r\n};\r\n// TestCs2Ts.prototype.test = function() {\r\n//     Debug.Log(this.num + ' = test')\r\n//     this.num = 123;\r\n// }\r\nconst p = Object.getOwnPropertyNames(TestBind.prototype);\r\nconsole.log(p); // [ 'constructor', 'echo', 'info' ]\r\nfor (var i in p) {\r\n    var name = p[i];\r\n    Debug.Log(name);\r\n    TestCs2Ts.prototype[name] = TestBind.prototype[name];\r\n}\r\n//TestCs2Ts.prototype['test2'] = TestBind.prototype['test2'];\r\nglobal.testBind = (obj) => {\r\n    Debug.Log('test bind 4');\r\n    //Debug.Log(obj.num);\r\n    obj.num = 5;\r\n    obj.test2();\r\n};\r\n/**\r\n * 使用component修饰器定义TestBehaviour为Js组件\r\n */\r\nlet TestBehaviour = class TestBehaviour extends Component {\r\n    /**\r\n     * 使用property修饰器定义需要在Inspector上显示的属性及其类型\r\n     */\r\n    prop1;\r\n    /**\r\n     * editable未实现，仅演示功能扩展模式\r\n     */\r\n    prop2;\r\n    /**\r\n     * 数组的几种定义形式\r\n     */\r\n    prop3;\r\n    prop4;\r\n    prop5;\r\n    prop6;\r\n    prop7;\r\n    Awake() {\r\n        //  let _功夫=\"如来神掌\";\r\n        // gf\r\n        // logging_trace_with_error.js\r\n        let test = {\r\n            add(x, y) {\r\n                console.log(new Error().stack);\r\n                return x + y;\r\n            },\r\n            calc() {\r\n                return this.add(8, 11) + this.add(9, 14);\r\n            },\r\n            main() {\r\n                let x = this.add(2, 3);\r\n                let y = this.calc();\r\n            },\r\n        };\r\n        global.testScript = (mb) => {\r\n            mb.script = this;\r\n            console.log('test hello');\r\n            mb.script.SayHello();\r\n        };\r\n        test.main();\r\n        console.log('Awake');\r\n        //console.log(xxx.xxx);\r\n        console.log(`prop1 = ${this.prop1}`);\r\n        console.log(`prop2 = ${this.prop2}`);\r\n        console.log(`prop3 = ${this.prop3}`);\r\n        console.log(`prop4 = ${this.prop4.length}`);\r\n        console.log(`prop5 = ${this.prop5}`);\r\n        console.log(`prop6 = ${this.prop6}`);\r\n        console.log(`prop7 = {${this.prop7.x}, ${this.prop7.y}, ${this.prop7.z}}`);\r\n    }\r\n    Start() {\r\n        console.log('Start');\r\n    }\r\n    SayHello() {\r\n        console.log('Hello, not bad!');\r\n    }\r\n    OnEnable() {\r\n        console.log('OnEnable');\r\n    }\r\n    OnDisable() {\r\n        console.log('OnDisable');\r\n    }\r\n    OnDestroy() {\r\n        console.log('OnDestroy');\r\n    }\r\n};\r\n__decorate([\r\n    property(UnityEngine.GameObject)\r\n], TestBehaviour.prototype, \"prop1\", void 0);\r\n__decorate([\r\n    property({\r\n        type: System.Single, editable: true,\r\n    })\r\n], TestBehaviour.prototype, \"prop2\", void 0);\r\n__decorate([\r\n    property({\r\n        type: UnityEngine.GameObject, isArray: true,\r\n    })\r\n], TestBehaviour.prototype, \"prop3\", void 0);\r\n__decorate([\r\n    property([UnityEngine.Vector3])\r\n], TestBehaviour.prototype, \"prop4\", void 0);\r\n__decorate([\r\n    property({\r\n        type: [System.UInt32],\r\n    })\r\n], TestBehaviour.prototype, \"prop5\", void 0);\r\n__decorate([\r\n    property(UnityEngine.Camera)\r\n], TestBehaviour.prototype, \"prop6\", void 0);\r\n__decorate([\r\n    property(UnityEngine.Vector3)\r\n], TestBehaviour.prototype, \"prop7\", void 0);\r\nTestBehaviour = __decorate([\r\n    component()\r\n], TestBehaviour);\r\nlet UserBehaviour1 = class UserBehaviour1 {\r\n};\r\nUserBehaviour1 = __decorate([\r\n    component('User')\r\n], UserBehaviour1);\r\nlet UserBehaviour2 = class UserBehaviour2 {\r\n};\r\nUserBehaviour2 = __decorate([\r\n    component('User')\r\n], UserBehaviour2);\r\nlet UserBehaviour3 = class UserBehaviour3 {\r\n};\r\nUserBehaviour3 = __decorate([\r\n    component('User')\r\n], UserBehaviour3);\r\nlet SystemBehaviour1 = class SystemBehaviour1 {\r\n};\r\nSystemBehaviour1 = __decorate([\r\n    component('System')\r\n], SystemBehaviour1);\r\nlet SystemBehaviour2 = class SystemBehaviour2 {\r\n};\r\nSystemBehaviour2 = __decorate([\r\n    component('System')\r\n], SystemBehaviour2);\r\nlet SystemBehaviour3 = class SystemBehaviour3 {\r\n};\r\nSystemBehaviour3 = __decorate([\r\n    component('System')\r\n], SystemBehaviour3);\r\n//# sourceMappingURL=index.js.map","references":["/mnt/f/CubeWars/samples/js-behaviour/Packages/src/sandbox/TestBind.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/typings/csharp/index.d.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-base.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-decoration.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-info-mgr.ts","/mnt/f/CubeWars/samples/js-behaviour/Packages/src/component/component-inst-mgr.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}"}
